@using SimpleQ.Webinterface.App_LocalResources
@using SimpleQ.Webinterface.Models;
@using System.Resources;
@model SimpleQ.Webinterface.Models.ViewModels.SurveyCreationModel

<div class="row mt-1 ml-0 mr-0">
    <div class="col-md-7 pl-4">
        <h2>@Resources.surveyCreationHeader</h2>

        <label>@Resources.surveyCategoryHeader</label>
        <div class="row mr-0 ml-0">
            <div class="col-11 p-0">
                @Html.DropDownListFor(model => model.SurveyCategories, new SelectList(Model.SurveyCategories, "CatId", "CatName"), new { @class = "form-control dropBoxRightNotRounded rightNotRounded" })
            </div>
            <div class="col-1 p-0">
                <button class="btn btn-success btn-block pb-0 pl-0 pr-0 leftNotRounded" id="openAddCategoryBtn"><i class="material-icons">&#xe145;</i></button>
            </div>
        </div>
        <div class="row mr-0 ml-0 mt-2" id="newCategoryDiv">
            <div class="col-11 p-0">
                <input class="form-control border border-success" id="newCategoryTB" type="text" placeholder="@Resources.newCategoryName" />
            </div>
            <div class="col-1 p-0">
                <button class="btn btn-success btn-block pb-0 pl-0 pr-0 leftNotRounded" id="addCategoryBtn" data-toggle="tooltip" title="@Resources.add"><i class="material-icons">&#xe148;</i></button>
            </div>
        </div>

        <div class="form-group mt-2">
            <label for="AnswerTypeCB">Antwortart</label>
            <select class="form-control" id="AnswerTypeCB">
                @{


                    ResourceManager rm = Resources.ResourceManager;
                    foreach (AnswerType at in Model.AnswerTypes)
                    {
                        if (at.TypeId == 1)
                        {
                            <option value="@at.TypeId" selected>@rm.GetString(at.TypeDesc)</option>
                        }
                        else
                        {
                            <option value="@at.TypeId">@rm.GetString(at.TypeDesc)</option>
                        }
                    }
                }

            </select>
        </div>

        <button type="button" class="btn btn-primary btn-block mt-2" id="openAddAnswer"><span class="d-flex justify-content-between"><span>Answers</span><i class="material-icons">&#xe876;</i></span></button>
        <div id="answerBox" class="border border-dark mt-2">
            <div class="row mt-1 mr-0 ml-0">
                <div class="col-7 pl-2 pr-1"><input id="answerInput" class="form-control" type="text" /></div>
                <div class="col-5 pl-1 pr-2"><button class="btn btn-primary btn-block" onclick="addAnswer()">Antwort hinzufügen</button></div>
            </div>
            <ul class="list-group" id="answerUL">
                @*<li class="list-group-item">
                    <span class="d-flex justify-content-between">
                        <span>Hallo<button class="btn btn-info ml-2 p-0"><i class="material-icons">&#xe150;</i></button></span>
                        <button class="btn btn-danger ml-2"><i class="material-icons">&#xe5cd;</i></button>
                    </span>
                </li>
                <li class="list-group-item">
                    <span class="d-flex justify-content-between">
                        <span><input type="text" class="" value="hallo" /><button class="btn btn-info ml-2 p-0"><i class="material-icons">	&#xe5ca;</i></button></span>
                        <button class="btn btn-danger ml-2"><i class="material-icons">&#xe5cd;</i></button>
                    </span>
                </li>
                <li class="list-group-item">
                    <span class="d-flex justify-content-between">
                        <span>Hallo<button class="btn btn-info ml-2 p-0"><i class="material-icons">&#xe150;</i></button></span>
                        <button class="btn btn-danger ml-2"><i class="material-icons">&#xe5cd;</i></button>
                    </span>
                </li>
                <li class="list-group-item">
                    <span class="d-flex justify-content-between">
                        <span>Hallo<button class="btn btn-info ml-2 p-0"><i class="material-icons">&#xe150;</i></button></span>
                        <button class="btn btn-danger ml-2"><i class="material-icons">&#xe5cd;</i></button>
                    </span>
                </li>*@
            </ul>
        </div>

        <div class="form-group mt-2">
            <label for="groups">@Resources.groups</label>
            <div class="border border-dark">
                <ul class="list-group groups-ul pl-2" id="groups">
                    @foreach (Department group in Model.Departments)
                    {
                        <li>
                            <input type="checkbox" checked="checked" onclick=""><span>@group.DepName</span>
                        </li>
                    }
                </ul>
            </div>
        </div>
        <div class="form-group mt-2">
            <span class="row">
                <span class="col-md">
                    <label for="QuestionFromDatePicker">@Resources.questionTimeDateHeader @Resources.from</label>
                    <input id="QuestionFromDatePicker" type="date" class="form-control" />
                    <label for="QuestionToDatePicker">@Resources.questionTimeDateHeader @Resources.to</label>
                    <input id="QuestionToDatePicker" type="date" class="form-control" />
                </span>
                <span class="col-md">
                    <label for="QuestionFromTimePicker">@Resources.questionTimeTimeHeader @Resources.from</label>
                    <input id="QuestionFromTimePicker" type="time" class="form-control" />
                    <label for="QuestionToTimePicker">@Resources.questionTimeTimeHeader @Resources.to</label>
                    <input id="QuestimeToTimePicker" type="time" class="form-control" />
                </span>
            </span>
        </div>
        <div class="form-group mt-2">
            <label for="question">@Resources.questionHeader</label>
            <input type="text" class="form-control mr-0" id="question">
        </div>
        <button type="submit" class="btn btn-primary btn-block">Umfrage absenden</button>
    </div>
    <div class="col-md-5 p-0">
        <h3 class="text-center">@Resources.surveyPreviewHeader</h3>

    </div>
</div>

<script>
    $(function () {
        $("#newCategoryDiv").hide();
        $("#answerBox").hide();
        $('[data-toggle="tooltip"]').tooltip();

        $("#openAddCategoryBtn").click(function () {   
            $("#newCategoryDiv").show();
            $("#openAddCategoryBtn").prop("disabled", true);
        });

        $("#addCategoryBtn").click(function () {
            $("#newCategoryDiv").hide();
            $("#openAddCategoryBtn").prop("disabled", false);
            $("#openAddCategoryBtn").hover();
        });

        $("#openAddAnswer").click(function () {
            if ($("#answerBox").is(":hidden")) {
                $("#answerBox").show();
            } else if ($("#answerBox").is(":visible")) {
                $("#answerBox").hide();
            }
        });
    });

    function addAnswer() {
        var ul = document.getElementById("answerUL");
        ul.innerHTML += '<li class="list-group-item">' +
            '<span class="d-flex justify-content-between">' +
            '<span><input type="text" class="" value="hallo" /><button class="btn btn-info ml-2 p-0"><i class="material-icons">&#xe5ca;</i ></button ></span > <button class="btn btn-danger ml-2"><i class="material-icons">&#xe5cd;</i></button>' +
            '</span >' +
            '</li >'; 
    }
</script>


